# 性能考虑

---

#### 停用 KEYS \* 命令

> 当我们关注一个 redis 实例的统计数据，我们会快速地输入”KEYS \*” 命令，这样 key 的信息会很明显地展示出来。
>
> 当你有1300万个key时，执行速度将会变慢。因为KEYS命令的时间复杂度是O\(n\)，其中n是要返回的keys的个数，这样这个命令的复杂度就取决于数据库的大小了。并且在这个操作执行期间，其它任何命令在你的实例中都无法执行。
>
> 作为一个替代命令，看一下 SCAN 吧，其允许你以一种更友好的方式来执行
>
> SCAN 通过增量迭代的方式来扫描数据库。这一操作基于游标的迭代器来完成的，因此只要你觉得合适，你可以随时停止或继续。
>
> ```
>KEYS *
>```


#### 尽可能使用Hashes

> 以一种优雅的方式引入 Hashes 吧。 Hashes 将会带给你一种前所未有的体验。尽可能的少使用下面的 KEY 结构。
>
> ```Redis
> user:1000:username user1
> user:1000:email user1@qq.com
> user:1000:mobile 13888888888
> ```
>
> 使用 Hashes 代替吧，你会发现，一个 KEY 就够了。
>
> ```
> HSET user_info:1000 username user1
> HMSET user_info:1000 email user1@qq.com mobile 13888888888
> ```



